<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
	<head>
	    <link rel="stylesheet" href="http://openlayers.org/en/v3.0.0/css/ol.css" type="text/css">
	    <style>
	      .map {
	        height: 400px;
	        width: 100%;
	      }
	    </style>
	    <script src="http://openlayers.org/en/v3.0.0/build/ol.js" type="text/javascript"></script>
	    <title>Project Browser</title>
	    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
	    
		<script type="text/javascript">
			var map, layer, markers, popup;
			function onPopupClose(evt) {
				map.removePopup(popup);
			}
			function addMarker(lonLat,  name){
				var size = new OpenLayers.Size(21, 25);
				var offset = new OpenLayers.Pixel(-(size.w / 2), -size.h);
				var icon = new OpenLayers.Icon('http://www.openstreetmap.org/openlayers/img/marker.png',size,offset);
				var marker = new OpenLayers.Marker(lonLat,
						icon);
				marker.events.register('mousedown', marker, function(evt) {
			        popup = new OpenLayers.Popup.FramedCloud("chicken", 
			        		lonLat,
			                null,
			                "<div style='font-size:2em'>" + name  +"</div>",
			                null, true, onPopupClose);
					map.addPopup(popup);
					
					OpenLayers.Event.stop(evt);
				});
				markers.addMarker(marker);
			}
			
			function init() {
				map = new OpenLayers.Map ("map", {
					controls:[
								new OpenLayers.Control.Navigation(),
								new OpenLayers.Control.PanZoomBar(),
								new OpenLayers.Control.LayerSwitcher(),
								new OpenLayers.Control.Attribution()],
							maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),
							maxResolution: 156543.0399,
							numZoomLevels: 19,
							units: 'm',
							projection: new OpenLayers.Projection("EPSG:900913"),
							displayProjection: new OpenLayers.Projection("EPSG:4326")
						} );
				
				
				layer = new OpenLayers.Layer.OSM("OpenStreetMap");            
				map.addLayer(layer);
				//layer = new OpenLayers.Layer.Google("Google Streets");
				//layer = new OpenLayers.Layer.VirtualEarth ( "Virtual Earth Layer" );
				//map.addLayer(layer);
				
				/*	
				linesLayer = new OpenLayers.Layer.Vector("Logs", {
					projection: map.displayProjection,
			        strategies: [new OpenLayers.Strategy.Fixed()],
			        protocol: new OpenLayers.Protocol.HTTP({
			            url: "@routes.Assets.at("geopapprojects/"+ project.folderPath +"/lines.kml")",
			            format: new OpenLayers.Format.KML({
			                extractStyles: true, 
			                extractAttributes: true
			            })
			        })
			    });
				map.addLayer(linesLayer);
				*/
				
			
				markers = new OpenLayers.Layer.Markers("Markers");
				map.addLayer(markers);
				
				bounds = new OpenLayers.Bounds();
				// notes added as:
				//var lonLat = new OpenLayers.LonLat(@note.lon, @note.lat).transform(new OpenLayers.Projection("EPSG:4326"), map.getProjectionObject());
				//bounds.extend(lonLat);
				//addMarker(lonLat, '@note.text' + '<br/>' + '@note.dateTime')
				NOTES_ADDITION_LIST
				
				map.addControl(new OpenLayers.Control.LayerSwitcher());
				map.zoomToExtent(bounds, false);
			}
		</script>
	</head>
  <body>
    <h2>My Map</h2>
    <div id="map" class="map"></div>
    <script type="text/javascript">
      var map = new ol.Map({
        target: 'map',
        layers: [
	        new ol.layer.Tile({
			  source: new ol.source.OSM({
			    attributions: [
			      new ol.Attribution({
			        html: 'All maps &copy; ' +
			            '<a href="http://www.opencyclemap.org/">OpenCycleMap</a>'
			      }),
			      ol.source.OSM.DATA_ATTRIBUTION
			    ],
			    url: 'http://{a-c}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png'
			  })
			}),			
			new ol.layer.Tile({
			  source: new ol.source.OSM({
			    attributions: [
			      new ol.Attribution({
			        html: 'All maps &copy; ' +
			            '<a href="http://www.openseamap.org/">OpenSeaMap</a>'
			      }),
			      ol.source.OSM.DATA_ATTRIBUTION
			    ],
			    crossOrigin: null,
			    url: 'http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png'
			  })
			}),
	        new ol.layer.Tile({
	          source: new ol.source.MapQuest({layer: 'sat'})
	        }),
	        new ol.layer.Tile({
		      source: new ol.source.OSM()
		    })
        ],
        view: new ol.View({
          center: ol.proj.transform([37.41, 8.82], 'EPSG:4326', 'EPSG:3857'),
          zoom: 4
        })
      });
    </script>
  </body>
</html>